1: 请求进来，直接在/lock 节点下创建一个临时顺序节点
2：判断自己是不是lock节点下，最小的节点
    a. 是最小的，获得锁
    b. 不是。对前面的节点进行监听（watch）
3: 获得锁的请求，处理完释放锁，即delete节点，然后后继第一个节点将收到通知，重复第2步判断

4：
![](.zookeeper 公平锁_images/783c6afc.png)