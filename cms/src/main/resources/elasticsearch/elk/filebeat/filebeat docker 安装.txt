docker pull docker.elastic.co/beats/filebeat:7.1.1


filebeat.yml

setup.ilm.enabled: false
setup.template.name: "filebeat-161"
setup.template.pattern: "filebeat-161-*"
setup.template.settings:
  index.number_of_shards: 5
  index.number_of_replicas: 0
  index.codec: best_compression

filebeat.inputs:
- type: log        ##文本日志
  enable: true
  paths:
      - /var/log/filebeat/lemon.log     ##日志文件修改权限到666
  fields:
     from: filebeat

output:
  elasticsearch:        #输出到elasticsearch，也可以输出到logstash
    hosts: ["192.168.232.160:9200"]   #elasticsearch地址,
    index: "filebeat-161-%{+yyyy.MM.dd}"
  kafka:
     enable: true
     hosts: ["192.168.109.129:9200"]
     topic: filebeat
     compression: gzip

processors:
    - drop_fields:
        fields: ["beat", "input", "source", "offset", "metadata", "timestamp", "agent", "ecs", "fields"]


filebeat.config.modules:
    path: ${path.config}/modules.d/*.yml
    reload.enable: true

docker run -d \
--name=my-filebeat-2 \
-v /root/docker/filebeat/filebeat.yml:/usr/share/filebeat/filebeat.yml \
-v /root/docker/filebeat/log:/var/log/filebeat/ \
docker.elastic.co/beats/filebeat:7.1.1