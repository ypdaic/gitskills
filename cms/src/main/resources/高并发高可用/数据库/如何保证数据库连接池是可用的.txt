1. 启动一个线程来定期检测连接池中的连接是否可用，比如使用连接发送“select 1”的命
令给数据库看是否会抛出异常，如果抛出异常则将这个连接从连接池中移除，并且尝试关
闭。目前 C3P0 连接池可以采用这种方式来检测连接是否可用，也是我比较推荐的方式。


2. 在获取到连接之后，先校验连接是否可用，如果可用才会执行 SQL 语句。比如 DBCP 连
接池的 testOnBorrow 配置项，就是控制是否开启这个验证。这种方式在获取连接时会引
入多余的开销，在线上系统中还是尽量不要开启，在测试服务上可以使用