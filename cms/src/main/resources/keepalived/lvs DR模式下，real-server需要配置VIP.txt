#!/bin/sh
#LVS Client Server
VIP=10.1.1.166
case $1 in

start)

    ifconfig lo:0 $VIP broadcast $VIP netmask255.255.255.255 up
    /sbin/route add -host $VIP dev lo:0
    echo "1" >/proc/sys/net/ipv4/conf/lo/arp_ignore
    echo "2" >/proc/sys/net/ipv4/conf/lo/arp_announce
    echo "1" >/proc/sys/net/ipv4/conf/all/arp_ignore
    echo "2" >/proc/sys/net/ipv4/conf/all/arp_announce
    sysctl -p >/dev/null 2>&1
    echo "RealServer start ok"
    exit0
;;

stop)
    ifconfig lo:0 down
    /sbin/route del $VIP -p >/dev/null 2>&1
    echo "0" >/proc/sys/net/ipv4/conf/lo/arp_ignore
    echo "0" >/proc/sys/net/ipv4/conf/lo/arp_announce
    echo "0" >/proc/sys/net/ipv4/conf/all/arp_ignore
    echo "0" >/proc/sys/net/ipv4/conf/all/arp_announce
    echo "RealServer Stoped ok"
    exit 1
;;
*)
    echo "Usage: $0 {start|stop}"
;;
seac