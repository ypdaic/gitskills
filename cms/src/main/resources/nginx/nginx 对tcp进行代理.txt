stream {

    upstream mycat {
      # hash $remote_addr consistent;
      # $binary_remote_addr;
      # server 192.168.182.155:3306 weight=5 max_fails=3 fail_timeout=30s;
        server 192.168.109.129:8806;
        server 192.168.109.1:8806;
    }
    server {
       listen 13306;#数据库服务器监听端口
       proxy_connect_timeout 10s;
       proxy_timeout 300s;#设置客户端和代理服务之间的超时时间，如果5分钟内没操作将自动断开。
       proxy_pass mycat;
    }
}

stream需要和http 模块属于同一级

