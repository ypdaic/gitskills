实际上，服务端并不需要保存一个完整的结果集。取数据和发数据的流程是这样的：

    获取一行，写到net_buffer中。这块内存的大小是由参数net_buffer_length定义的，默认是16k。

    重复获取行，直到net_buffer写满，调用网络接口发出去。

    如果发送成功，就清空net_buffer，然后继续取下一行，并写入net_buffer。

    如果发送函数返回EAGAIN或WSAEWOULDBLOCK，就表示本地网络栈（socket send buffer）写满了，进入等待。直到网络栈重新可写，再继续发送。