先搭建nameserver集群

1：创建rocketmq_cluster目录
2：拷贝rocketmq到rocketmq_cluster目录，一个为rocketmq_namesrv_a，一个rocketmq_namesrv_b
3：在rocketmq_namesrv_a下，使用命令sed -i 's#${user.home}#/opt/rocketmq_cluster/rocketmq_namesrv_a#g' *.xml 修改日志路径
4：在rocketmq_namesrv_a下,新增namesrv_a.properties 添加listenPort=9876
5：在rocketmq_namesrv_a下，使用命令sed -i 's#${user.home}#/opt/rocketmq_cluster/rocketmq_namesrv_b#g' *.xml 修改日志路径
6：在rocketmq_namesrv_a下,新增namesrv_b.properties 添加listenPort=9877

搭建broker集群

1：拷贝rocketmq到rocketmq_cluster目录，一个为rocketmq_broker_a_master，一个rocketmq_broker_b_master
3：在rocketmq_broker_a_master下，使用命令sed -i 's#${user.home}#/opt/rocketmq_cluster/rocketmq_broker_a_master/logs#g' *.xml 修改日志路径
4：在rocketmq_broker_a_master下,修改/opt/rocketmq_cluster/rocketmq_broker_a_master/conf/2m-noslave
   下的broker-a.properties
5：在rocketmq_broker_a_master下，使用命令sed -i 's#${user.home}#/opt/rocketmq_cluster/rocketmq_broker_b_master/logs#g' *.xml 修改日志路径
6：在rocketmq_broker_a_master下,修改/opt/rocketmq_cluster/rocketmq_broker_a_master/conf/2m-noslave
     下的broker-b.properties