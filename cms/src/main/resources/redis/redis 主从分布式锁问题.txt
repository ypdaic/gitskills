redis 解决主从架构下的分布式锁因为主宕机而失效的问题大概是无解的，可以去使用zookeeper，天生数据一致性

如果还是想用redis进行加锁，可以搞多个master，使用redlock 进行加锁，超过半数的节点加锁成功才算加锁成功